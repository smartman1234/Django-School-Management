{% extends 'dashboard.html' %}
{% load static %}

{% block dashboard-body %}
<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="{% url 'index_view' %}">Dashboard</a></li>
        <li class="breadcrumb-item">
            <a href="{% url 'result:subject_groups' %}">Subject Groups</a>
        </li>
        <li class="breadcrumb-item active" aria-current="page">Create Subject Group</li>
    </ol>
</nav>


<div class="row">
  <div class="col-md-12">
    <!-- Dept, Semester form -->
    <form action="" id="subjectGroupCreateForm">
      <!-- Inputs -->
      <div id="subjectGroupInputs">
        <div class="form-inline">
          <label class="sr-only" for="department">Department</label>
          <select name="department" class="form-control mb-2 mr-sm-2" id="department">
            <option value="" selected disabled>Choose Department</option>
            {% for dept in departments %}
              <option value="{{ dept.pk }}">{{ dept.name }}</option>
            {% endfor %}
          </select>

          <label class="sr-only" for="semester">Semester</label>
          <select name="semester" class="form-control mb-2 mr-sm-2" id="semester">
            <option value="" selected disabled>Choose Semester</option>
            {% for semester in semesters %}
              <option value="{{ semester.pk }}">{{ semester }}</option>
            {% endfor %}
          </select>
        </div>
      </div>

      <div class="row">
        <div class="col-12">
          <div><h3 class="py-4">Select Subjects</h3></div>
        </div>
      </div>
      <!-- Subject Listing -->
      <div class="row" id="subjects-container">
        {% for subject in subjects %}
          <!-- Single Subject -->
          <div class="col-sm-6 col-md-2 col-lg-3 subject-col" data-subject-pk="{{ subject.pk }}">
            <div class="subject-wrapper">
              <div class="card mb-3">
                <img class="card-img-top" src="https://via.placeholder.com/100" alt="Card image cap">
                <div class="card-body">
                  <h5 class="card-title">{{ subject.name }}</h5>
                  <div class="card-footer">
                    <i style="font-weight: bold;">Code: </i> {{ subject.subject_code }}
                  </div>
                </div>
              </div>
            </div>
          </div>
        {% endfor %}        
      </div><!-- Subject Wrapper End  -->
    </form>
  </div>
</div>
{% endblock %}


{% block extrajs %}
  <script>
    const subjectsContainer = document.getElementById('subjects-container');

    for (let i = 0; i < subjectsContainer.childNodes.length; i++) {
      if (subjectsContainer.childNodes[i].classList && 
        subjectsContainer.childNodes[i].classList.contains('subject-col')) {
        // Conditional Code Runs from here
        subjectsContainer.childNodes[i].addEventListener('click', function(){
          const cardItem = this.children[0].children[0] // get .card class
          cardItem.classList.toggle('selected-item');
        })
      }
    }
  </script>
{% endblock %}